# Telegram Task Creation - Visual Guide

## Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      TELEGRAM BOT                               â”‚
â”‚                  (@kanban_notify_bot)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  Bot Polling Thread   â”‚
                      â”‚  (Long Polling)       â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚ _process_updates()    â”‚
                      â”‚                       â”‚
                      â”‚ Routes based on:      â”‚
                      â”‚ â€¢ /start              â”‚
                      â”‚ â€¢ /add                â”‚
                      â”‚ â€¢ conversation step   â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                         â”‚                         â”‚
        â–¼                         â–¼                         â–¼
   /start Handler        /add Handler          Conversation Handler
        â”‚                         â”‚                         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚   User State Management   â”‚
                      â”‚   user_states[chat_id]    â”‚
                      â”‚   â€¢ step: int             â”‚
                      â”‚   â€¢ data: dict            â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                 â”‚                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
        â”‚ Step 1: Name â”‚  â”‚ Step 2: Desc â”‚  â”‚ Step 3: Dateâ”‚
        â”‚              â”‚  â”‚              â”‚  â”‚             â”‚
        â”‚ Validate &   â”‚  â”‚ Validate &   â”‚  â”‚ Parse &     â”‚
        â”‚ Store name   â”‚  â”‚ Store desc   â”‚  â”‚ Create task â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚  Task Creation      â”‚
                                        â”‚                     â”‚
                                        â”‚  â€¢ Insert to DB     â”‚
                                        â”‚  â€¢ Get board/col    â”‚
                                        â”‚  â€¢ Broadcast via WS â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚                          â”‚                          â”‚
                   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                   â”‚ Database  â”‚         â”‚ WebSocket Manager â”‚       â”‚ Telegram Bot    â”‚
                   â”‚ (SQLite)  â”‚         â”‚ (broadcast)       â”‚       â”‚ (send confirm)  â”‚
                   â”‚           â”‚         â”‚                   â”‚       â”‚                 â”‚
                   â”‚ New Task  â”‚         â”‚ Connected Clients â”‚       â”‚ "âœ… Created!"   â”‚
                   â”‚ Stored    â”‚         â”‚ See task in       â”‚       â”‚                 â”‚
                   â”‚           â”‚         â”‚ real-time âœ¨      â”‚       â”‚                 â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## State Machine Diagram

```
                                    START
                                      â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   User sends /add         â”‚
                        â”‚                            â”‚
                        â”‚  Is user linked?           â”‚
                        â”‚   YES â”€â”€â”€â”€â”€â”               â”‚
                        â”‚            â”‚ NO            â”‚
                        â”‚            â–¼               â”‚
                        â”‚      Send error msg       â”‚
                        â”‚            â”‚               â”‚
                        â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚                    â”‚
                        â”‚                   SKIP
                        â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ STATE 1: GET NAME     â”‚
                â”‚                       â”‚
                â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                â”‚ â”‚ USER ENTERS:    â”‚   â”‚
                â”‚ â”‚ Task title      â”‚   â”‚
                â”‚ â”‚ (max 200 chars) â”‚   â”‚
                â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                â”‚        â”‚              â”‚
                â”‚        â–¼              â”‚
                â”‚ Valid?                â”‚
                â”‚ YES  â”‚  NO            â”‚
                â”‚      â–¼                â”‚
                â”‚   Store & Move    Error msg
                â”‚   to State 2          â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ STATE 2: GET DESC     â”‚
                â”‚                       â”‚
                â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                â”‚ â”‚ USER ENTERS:    â”‚   â”‚
                â”‚ â”‚ Task descriptionâ”‚   â”‚
                â”‚ â”‚ (max 1000 chars)â”‚   â”‚
                â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                â”‚        â”‚              â”‚
                â”‚        â–¼              â”‚
                â”‚ Valid?                â”‚
                â”‚ YES  â”‚  NO            â”‚
                â”‚      â–¼                â”‚
                â”‚   Store & Move    Error msg
                â”‚   to State 3          â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ STATE 3: GET DATE     â”‚
                â”‚                       â”‚
                â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                â”‚ â”‚ USER ENTERS:    â”‚   â”‚
                â”‚ â”‚ DD/MM/YYYY      â”‚   â”‚
                â”‚ â”‚ hh:mm am/pm     â”‚   â”‚
                â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                â”‚        â”‚              â”‚
                â”‚        â–¼              â”‚
                â”‚ Valid format?         â”‚
                â”‚ YES  â”‚  NO            â”‚
                â”‚      â–¼                â”‚
                â”‚   Create Task     Error msg
                â”‚   & Broadcast         â”‚
                â”‚        â”‚              â”‚
                â”‚        â–¼              â”‚
                â”‚   Clean up state      â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                       END
```

---

## Conversation Flow Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              EXAMPLE CONVERSATION FLOW                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER                              BOT                      SYSTEM

                                                    [Server running]
                                                    [Bot polling]
                                                    [WebSocket active]

  /add  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶

                          ğŸ“ Create New Task
                          Step 1/3: Give the name
                          of your task
                  â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Buy groceries
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶

                   âœ… Task name saved: Buy groceries
                   Step 2/3: Give the description
                   of the task
                  â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Milk, bread, eggs, veg
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶

                   âœ… Description saved
                   Step 3/3: Due date in format
                   DD/MM/YYYY hh:mm am/pm
                   (Example: 15/02/2026 03:30 pm)
                  â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

15/02/2026 03:30 pm
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
                                                    [Parsing date...]
                                                    [Creating task...]
                                                    [Broadcasting...]
                   âœ… Task Created Successfully!
                   
                   Task: Buy groceries
                   Description: Milk, bread, eggs, veg
                   Due Date: 15/02/2026 03:30 PM
                   Priority: Medium
                   Column: To Do
                   Board: My Board
                  â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  WHAT HAPPENED BEHIND THE SCENES             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚ 1. User verified âœ…                                           â”‚
â”‚ 2. Board found âœ…                                             â”‚
â”‚ 3. Column found âœ…                                            â”‚
â”‚ 4. Date parsed âœ…                                             â”‚
â”‚ 5. Task inserted to database âœ…                               â”‚
â”‚ 6. WebSocket broadcast sent âœ…                                â”‚
â”‚ 7. All connected clients notified âœ…                          â”‚
â”‚ 8. User state cleaned up âœ…                                   â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              WHAT USERS SEE ON THE BOARD                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  Board: My Board                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ To Do              â”‚  In Progress  â”‚  Done           â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚     â”‚
â”‚  â”‚ â”‚ Buy groceries    â”‚ â—€â”€â”€â”€â”€ NEW TASK!                â”‚     â”‚
â”‚  â”‚ â”‚                  â”‚     (appears in real-time)      â”‚     â”‚
â”‚  â”‚ â”‚ Due: 15/02 03:30 â”‚                                â”‚     â”‚
â”‚  â”‚ â”‚ Priority: Medium â”‚                                â”‚     â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚     â”‚
â”‚  â”‚                                                      â”‚     â”‚
â”‚  â”‚ [Other existing tasks...]                           â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagram

```
TELEGRAM USER
      â”‚
      â”‚ Types: /add + task details
      â–¼
  Telegram API (Cloud)
      â”‚
      â”‚ getUpdates() polling
      â–¼
  Bot Polling Thread
      â”‚
      â”‚ Message received
      â–¼
  _process_updates()
      â”‚
      â”‚ Route based on command
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                 â”‚                 â”‚                  â”‚
      â–¼                 â–¼                 â–¼                  â–¼
   /start          /add              conversation       (other)
     â”‚              â”‚                    â”‚                  â”‚
     â”‚              â–¼                    â”‚                  â”‚
     â”‚      Check user linked            â”‚                  â”‚
     â”‚      YESâ”‚ â”‚NO                     â”‚                  â”‚
     â”‚         â–¼                         â–¼                  â”‚
     â”‚      Show prompt          Show conversation       Skip
     â”‚         â”‚                  based on step
     â”‚         â”‚                    â”‚
     â”‚         â–¼                    â–¼
     â”‚      user_states dict   Handle input
     â”‚         â”‚                Validate
     â”‚         â”‚                  â”‚
     â”‚         â”‚                  â–¼
     â”‚         â”‚              Step 1? â”€â”€â–º Get name
     â”‚         â”‚              Step 2? â”€â”€â–º Get description
     â”‚         â”‚              Step 3? â”€â”€â–º Get date & Create
     â”‚         â”‚                  â”‚
     â”‚         â”‚                  â–¼
     â”‚         â”‚          Database Operation
     â”‚         â”‚                  â”‚
     â”‚         â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚         â”‚         â”‚                 â”‚
     â”‚         â”‚         â–¼                 â–¼
     â”‚         â”‚     Get Board         Get Column
     â”‚         â”‚         â”‚                 â”‚
     â”‚         â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚         â”‚                  â”‚
     â”‚         â”‚                  â–¼
     â”‚         â”‚         Create Task (INSERT)
     â”‚         â”‚                  â”‚
     â”‚         â”‚                  â–¼
     â”‚         â”‚         WebSocket Broadcast
     â”‚         â”‚                  â”‚
     â”‚         â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚         â”‚    â”‚                           â”‚
     â”‚         â”‚    â–¼                           â–¼
     â”‚         â”‚  All Connected Clients    Response to User
     â”‚         â”‚  See new task             Send confirmation
     â”‚         â”‚  in real-time âœ¨          message
     â”‚         â”‚    â”‚                           â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
          USER EXPERIENCE
     (task visible on board instantly)
```

---

## Timeline of Operations

```
Time  Action                        Duration
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
T0    User sends /add               
      â”‚
T+1ms Parse message                 ~1ms
      â”‚
T+2ms Route to handler              ~1ms
      â”‚
T+3ms Send "Enter task name"        ~1ms (async)
      â”‚
T+100ms User enters task name
      â”‚
T+101ms Validate input              ~1ms
      â”‚
T+102ms Store in state              ~1ms
      â”‚
T+103ms Send "Enter description"    ~1ms (async)
      â”‚
T+200ms User enters description
      â”‚
T+201ms Validate input              ~1ms
      â”‚
T+202ms Store in state              ~1ms
      â”‚
T+203ms Send "Enter date/time"      ~1ms (async)
      â”‚
T+300ms User enters date/time
      â”‚
T+301ms Validate format             ~1ms
      â”‚
T+302ms Parse datetime              ~1ms
      â”‚
T+303ms Create Task object          ~1ms
      â”‚
T+304ms Database INSERT             ~10ms
      â”‚
T+314ms Get Board query             ~5ms
      â”‚
T+319ms Get Column query            ~5ms
      â”‚
T+324ms WebSocket broadcast         ~5ms
      â”‚
T+329ms Send confirmation           ~1ms (async)
      â”‚
T+330ms Clean up state              <1ms
      â”‚
T+331ms âœ… COMPLETE
      (Total: ~331ms from date entry to task visible)

All database operations are async - don't block main thread!
```

---

## Error Handling Paths

```
User sends /add
      â”‚
      â”œâ”€ Not linked?
      â”‚  â””â”€â”€â–¶ Error: "Link account first"
      â”‚       â””â”€â”€â–¶ STOP
      â”‚
      â”œâ”€ Error in Step 1?
      â”‚  â”œâ”€ Empty name? â”€â”€â–¶ Error: "Name can't be empty"
      â”‚  â”‚                â””â”€â”€â–¶ Retry Step 1
      â”‚  â”‚
      â”‚  â””â”€ Too long?  â”€â”€â–¶ Error: "Max 200 chars"
      â”‚                  â””â”€â”€â–¶ Retry Step 1
      â”‚
      â”œâ”€ Error in Step 2?
      â”‚  â”œâ”€ Empty desc? â”€â”€â–¶ Error: "Desc can't be empty"
      â”‚  â”‚                â””â”€â”€â–¶ Retry Step 2
      â”‚  â”‚
      â”‚  â””â”€ Too long?  â”€â”€â–¶ Error: "Max 1000 chars"
      â”‚                  â””â”€â”€â–¶ Retry Step 2
      â”‚
      â”œâ”€ Error in Step 3?
      â”‚  â”œâ”€ Bad format? â”€â”€â–¶ Error: "Use DD/MM/YYYY hh:mm am/pm"
      â”‚  â”‚                â””â”€â”€â–¶ Retry Step 3
      â”‚  â”‚
      â”‚  â”œâ”€ No board? â”€â”€â–¶ Error: "Create a board first"
      â”‚  â”‚               â””â”€â”€â–¶ User goes to app, creates board, tries again
      â”‚  â”‚
      â”‚  â””â”€ No column? â”€â”€â–¶ Error: "Add columns to board"
      â”‚                   â””â”€â”€â–¶ User goes to app, adds columns, tries again
      â”‚
      â””â”€ Success!
         â””â”€â”€â–¶ âœ… Task created
            â””â”€â”€â–¶ Real-time update
            â””â”€â”€â–¶ Confirmation sent
```

---

## Priority & Status Defaults

```
Task Created via Telegram
â”‚
â”œâ”€ Priority: MEDIUM (fixed)
â”‚  â””â”€ Can be changed in app later
â”‚
â”œâ”€ Status: TODO (implicit)
â”‚  â””â”€ Can be changed by dragging in board
â”‚
â”œâ”€ Column: First column
â”‚  â””â”€ Usually "To Do"
â”‚
â”œâ”€ Creator: Logged-in user
â”‚  â””â”€ Cannot be changed
â”‚
â”œâ”€ Assigned To: Nobody (null)
â”‚  â””â”€ Can be assigned in app
â”‚
â””â”€ Tags/Labels: None
   â””â”€ Can be added in app
```

---

## Real-Time Update Mechanism

```
User A (Telegram)          User B (Web Browser)
  â”‚                             â”‚
  â”‚ Sends /add command           â”‚ Viewing board
  â”‚ ...completes conversation    â”‚ (WebSocket connected)
  â”‚                              â”‚
  â””â”€â”€â”€â”€â”€â”€â–¶ Database             â”‚
             â”‚                  â”‚
             â”‚ INSERT Task      â”‚
             â”‚                  â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ WebSocket Manager
                                  â”‚
                                  â”‚ broadcast_to_board()
                                  â”‚
                                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ User B's connection
                                  â”‚                â”‚
                                  â”‚                â–¼
                                  â”‚            User B sees new task
                                  â”‚            appear on board
                                  â”‚            WITHOUT refresh âœ¨
                                  â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ User C's connection (if any)
                                                  â”‚
                                                  â–¼
                                              User C sees it too!

Broadcast Message Format:
{
  "type": "task_created",
  "task": {
    "id": "...",
    "title": "Buy groceries",
    "description": "...",
    "column_id": "...",
    "board_id": "...",
    "due_date": "15/02/2026 3:30 PM",
    "priority": "medium",
    "created_by": "john_doe"
  }
}
```

---

## Security Flow

```
Message arrives
      â”‚
      â–¼
Verify chat_id against telegram_chat_id in database
      â”‚
      â”œâ”€ Not found?
      â”‚  â””â”€â”€â–¶ Reject with "Not linked" error
      â”‚
      â””â”€ Found?
         â””â”€â”€â–¶ Get user from database
            â””â”€â”€â–¶ Check if user owns board
               â””â”€â”€â–¶ Create task
                  â””â”€â”€â–¶ Only inserted to user's board
                     â””â”€â”€â–¶ Cannot create in other users' boards
```

All operations are verified against the user's actual database records!
